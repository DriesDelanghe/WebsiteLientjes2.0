<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/admin.css">

    <title>admin - inbox</title>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
            crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/6e9f44a530.js" crossorigin="anonymous"></script>
</head>
<body>

<header th:replace="admin/fragments/header :: header"></header>

<div class="container-fluid row mt-5 mx-0 px-0">
    <h5 class="px-4">Inbox</h5>
    <hr>
    <div class="container-fluid col-12 d-flex flex-lg-row flex-column">
        <div class="container-fluid p-0 col-lg-2 col-12 d-flex flex-row justify-content-center justify-content-lg-start flex-lg-column flex-wrap m-lg-0 my-2">
            <a th:href="@{|/admin/inbox|}" class="btn btn-light">Alles</a>
            <a th:href="@{|/admin/inbox/${contactType.id}|}" class="btn btn-light"
               th:each="contactType : ${contactTypeList}">
                <p th:text="${contactType.questionType}"></p>
            </a>
        </div>
        <form method="post" th:action="@{|/admin/removemessages|}" class="w-100">

            <label for="submitform" class="form-label col-1 d-flex justify-content-center btn btn-outline-dark">
                <i class="fas fa-trash" ></i>
                <input type="submit" id="submitform" class="d-none">
            </label>
            <div class="container-fluid p-0">
                <div class="row p-1 bg-light" th:each="message : ${contactFormList}"
                     th:classappend="${message.read == false} ? 'fw-bold'">

                    <div class="col-2 p-0">
                        <label th:for="|checkbox${message.id}|"
                               class="h-100 w-100 d-flex justify-content-center align-content-around">
                            <input type="checkbox" name="messageId" class="form-check" th:value="${message.id}" th:id="|checkbox${message.id}|">
                        </label>
                    </div>
                    <div class="col-7 col-lg-8" style="transform: rotate(0)">
                        <a th:href="@{|/admin/inbox/message/${message.id}|}"
                           class="stretched-link text-decoration-none"></a>
                        <h6 th:text="${message.onderwerp}" class="text-dark"></h6>
                        <p class="ellipsis"><small
                                th:classappend="${message.read == false} ? 'text-dark' : 'text-muted'"
                                th:text="${message.question.replaceAll('<br/>', ' ')}"></small></p>

                    </div>
                    <div class="col-3 col-lg-1" style="transform: rotate(0)">
                        <a th:href="@{|/admin/inbox/message/${message.id}|}"
                           class="stretched-link text-decoration-none"></a>
                        <p><small th:classappend="${message.read == false} ? 'text-dark' : 'text-muted'"
                                  th:text="${#dates.createNow().day == message.timestamp.day} ? ${#dates.format(message.timestamp, 'HH:mm')} : ${#dates.format(message.timestamp, 'dd MMM')}"></small>
                        </p>
                    </div>
                    <hr class="text-secondary">
                </div>
            </div>
        </form>
    </div>
</div>


</body>
</html>